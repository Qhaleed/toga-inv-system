Server running on port 5001
Connected to local SQLite database.
Error initializing database schema: Error: SQLITE_CONSTRAINT: UNIQUE constraint failed: accounts.email
--> in Database#exec('-- SQLite-compatible schema for TogaInventory\n' +
  '\n' +
  '-- create accounts table\n' +
  'CREATE TABLE IF NOT EXISTS accounts (\n' +
  '    account_id INTEGER PRIMARY KEY AUTOINCREMENT,\n' +
  '    email TEXT UNIQUE NOT NULL,\n' +
  '    password TEXT NOT NULL,\n' +
  '    first_name TEXT NOT NULL,\n' +
  '    surname TEXT NOT NULL,\n' +
  '    middle_initial TEXT,\n' +
  '    id_number TEXT,\n' +
  '    course TEXT,\n' +
  "    role TEXT DEFAULT 'student',\n" +
  "    status TEXT DEFAULT 'pending',\n" +
  '    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n' +
  ');\n' +
  '\n' +
  '-- create inventory table\n' +
  'CREATE TABLE IF NOT EXISTS inventory (\n' +
  '    inventory_id INTEGER PRIMARY KEY AUTOINCREMENT,\n' +
  '    account_id INTEGER,\n' +
  '    toga_size TEXT,\n' +
  '    tassel_color TEXT,\n' +
  '    hood_color TEXT,\n' +
  '    has_cap INTEGER DEFAULT 1,\n' +
  '    rent_date DATE,\n' +
  '    return_date DATE,\n' +
  '    is_overdue INTEGER DEFAULT 0,\n' +
  "    return_status TEXT DEFAULT 'Not Returned',\n" +
  "    payment_status TEXT DEFAULT 'Unpaid',\n" +
  "    evaluation_status TEXT DEFAULT 'Not Evaluated',\n" +
  '    remarks TEXT,\n' +
  '    item_condition TEXT,\n' +
  '    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n' +
  '    FOREIGN KEY (account_id) REFERENCES accounts (account_id)\n' +
  ');\n' +
  '\n' +
  '-- create evaluation table\n' +
  'CREATE TABLE IF NOT EXISTS evaluation (\n' +
  '    evaluation_id INTEGER PRIMARY KEY AUTOINCREMENT,\n' +
  '    inventory_id INTEGER,\n' +
  '    -- Gown evaluation fields\n' +
  '    gown_condition TEXT,\n' +
  '    gown_repair TEXT,\n' +
  '    gown_damage TEXT,\n' +
  '    gown_remarks TEXT,\n' +
  '    -- Hood evaluation fields\n' +
  '    hood_condition TEXT,\n' +
  '    hood_repair TEXT,\n' +
  '    hood_damage TEXT,\n' +
  '    hood_remarks TEXT,\n' +
  '    -- Tassel evaluation fields\n' +
  '    tassel_condition TEXT,\n' +
  '    tassel_missing INTEGER,\n' +
  '    tassel_damage TEXT,\n' +
  '    tassel_remarks TEXT,\n' +
  '    -- Cap evaluation fields\n' +
  '    cap_condition TEXT,\n' +
  '    cap_deform TEXT,\n' +
  '    cap_remarks TEXT,\n' +
  '    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n' +
  '    FOREIGN KEY (inventory_id) REFERENCES inventory (inventory_id)\n' +
  ');\n' +
  '\n' +
  '-- create items table\n' +
  'CREATE TABLE IF NOT EXISTS items (\n' +
  '    id INTEGER PRIMARY KEY AUTOINCREMENT,\n' +
  '    item_type TEXT NOT NULL,\n' +
  '    variant TEXT, -- Size for gown/cap, Color for tassel/hood\n' +
  '    quantity INTEGER DEFAULT 0,\n' +
  "    item_status TEXT DEFAULT 'In Good Condition',\n" +
  "    return_status TEXT DEFAULT 'Returned',\n" +
  '    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n' +
  '    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n' +
  ');\n' +
  '\n' +
  'INSERT INTO\n' +
  '    items (\n' +
  '        item_type,\n' +
  '        variant,\n' +
  '        quantity,\n' +
  '        item_status,\n' +
  '        return_status\n' +
  '    )\n' +
  'VALUES (\n' +
  "        'cap',\n" +
  "        'M',\n" +
  '        50,\n' +
  "        'In Good Condition',\n" +
  "        'Returned'\n" +
  '    ),\n' +
  '    (\n' +
  "        'cap',\n" +
  "        'L',\n" +
  '        30,\n' +
  "        'Damaged',\n" +
  "        'Not Returned'\n" +
  '    ),\n' +
  '    (\n' +
  "        'tassel',\n" +
  "        'Red',\n" +
  '        100,\n' +
  "        'In Good Condition',\n" +
  "        'Returned'\n" +
  '    ),\n' +
  '    (\n' +
  "        'tassel',\n" +
  "        'Blue',\n" +
  '        80,\n' +
  "        'For Repair',\n" +
  "        'Returned'\n" +
  '    ),\n' +
  '    (\n' +
  "        'gown',\n" +
  "        'Small',\n" +
  '        40,\n' +
  "        'In Good Condition',\n" +
  "        'Returned'\n" +
  '    ),\n' +
  '    (\n' +
  "        'gown',\n" +
  "        'Medium',\n" +
  '        60,\n' +
  "        'For Repair',\n" +
  "        'Not Returned'\n" +
  '    ),\n' +
  '    (\n' +
  "        'hood',\n" +
  "        'Black',\n" +
  '        25,\n' +
  "        'Damaged',\n" +
  "        'Missing'\n" +
  '    ),\n' +
  '    (\n' +
  "        'hood',\n" +
  "        'White',\n" +
  '        10,\n' +
  "        'In Good Condition',\n" +
  "        'Returned'\n" +
  '    );\n' +
  '-- add sample admin account\n' +
  'INSERT INTO\n' +
  '    accounts (\n' +
  '        email,\n' +
  '        password,\n' +
  '        first_name,\n' +
  '        surname,\n' +
  '        middle_initial,\n' +
  '        id_number,\n' +
  '        course,\n' +
  '        role\n' +
  '    )\n' +
  'VALUES (\n' +
  "        'admin123@gmail.com',\n" +
  "        'password123',\n" +
  "        'System',\n" +
  "        'Admin',\n" +
  "        'A',\n" +
  "        'ADM001',\n" +
  "        'N/A',\n" +
  "        'admin'\n" +
  '    ),\n' +
  '    (\n' +
  "        'admin@toga.edu',\n" +
  "        'admin2024',\n" +
  "        'System',\n" +
  "        'Admin',\n" +
  "        'B',\n" +
  "        'ADM002',\n" +
  "        'N/A',\n" +
  "        'admin'\n" +
  '    );\n' +
  '\n' +
  '-- add sample student accounts\n' +
  'INSERT INTO\n' +
  '    accounts (\n' +
  '        email,\n' +
  '        password,\n' +
  '        first_name,\n' +
  '        surname,\n' +
  '        middle_initial,\n' +
  '        id_number,\n' +
  '        course,\n' +
  '        role\n' +
  '    )\n' +
  'VALUES (\n' +
  "        'student1@toga.edu',\n" +
  "        'student123',\n" +
  "        'Juan',\n" +
  "        'Dela Cruz',\n" +
  "        'M',\n" +
  "        'STU001',\n" +
  "        'BSIT',\n" +
  "        'student'\n" +
  '    ),\n' +
  '    (\n' +
  "        'student2@toga.edu',\n" +
  "        'student456',\n" +
  "        'Maria',\n" +
  "        'Reyes',\n" +
  "        'L',\n" +
  "        'STU002',\n" +
  "        'BSCS',\n" +
  "        'student'\n" +
  '    );', [Function (anonymous)])
    at initializeDatabase (/Users/clyde/development/toga-inv-system/backend/database/db.js:24:8)
    at Database.<anonymous> (/Users/clyde/development/toga-inv-system/backend/database/db.js:15:5) {
  errno: 19,
  code: 'SQLITE_CONSTRAINT',
  __augmented: true
}
